;(function($){$.fn.countdown=function(options){defaults={schedule:null,datetime:null,showYears:false,showDays:true,showHours:true,showMinutes:true,showSeconds:true,showOnZeroYears:false,showOnZeroDays:true,showOnZeroHours:true,showOnZeroMinutes:true,showOnZeroSeconds:true};var options=$.extend({timerCallback:function(){},countdownCallback:function(){}},defaults,options);options.datetime=$(this).attr('data-countdown')?$(this).attr('data-countdown'):null;return this.each(function(){var upcomingDate=scheduler(options);var element=$(this);setInterval(function(){updateElement(element,makeTimer(upcomingDate,options),options.timerCallback)},1000)});options.countdownCallback.call(this)};var updateElement=function(element,html,callback){$(element).html(html)}var scheduler=function(options){if(options.datetime!=null){return options.datetime}var upcomingDates=[];for(var day in options.schedule){var nextDate=nextDayByName(day);for(var time in options.schedule[day]){var timeString=nextDate+" "+options.schedule[day][time];upcomingDates.push(timeString)}}schedule=[];for(var key in upcomingDates){schedule.push(new Date(upcomingDates[key]))}parsedSchedule=[];for(var key in schedule){parsedSchedule.push(Date.parse(schedule[key])/1000)}var currentTime=new Date(),currentTimeParsed=Date.parse(currentTime)/1000;timeDifferences=[];for(var key in parsedSchedule){timeDifferences.push(parsedSchedule[key]-currentTimeParsed)}timeDifferencesParsed=[];for(key in timeDifferences){if(timeDifferences[key]>0){timeDifferencesParsed.push(timeDifferences[key])}}var shortTime=Math.min.apply(null,timeDifferencesParsed);for(var prop in timeDifferences){if(shortTime==timeDifferences[prop]){var shortTimeKey=prop}}var scheduledDate=upcomingDates[shortTimeKey];if(scheduledDate!=""){return scheduledDate}return null}var makeTimer=function(upcomingDate,options){if(upcomingDate==null){return""}var currentTime=new Date();var endTime=(Date.parse(upcomingDate)/1000);var currentTime=(Date.parse(currentTime)/1000);var timeLeft=endTime-currentTime;var years=0;var days=0;var hours=0;var minutes=0;var seconds=0;if(timeLeft>0){var years=Math.floor((timeLeft/31536000));var days=Math.floor((timeLeft/86400));var hours=Math.floor((timeLeft-(days*86400))/3600);var minutes=Math.floor((timeLeft-(days*86400)-(hours*3600))/60);var seconds=Math.floor((timeLeft-(days*86400)-(hours*3600)-(minutes*60)));if(days>365){days=days%365}}if(years<"10"){years="0"+years}if(days<"10"){days="0"+days}if(hours<"10"){hours="0"+hours}if(minutes<"10"){minutes="0"+minutes}if(seconds<"10"){seconds="0"+seconds}var counter_years='<div class="years"><span class="count">'+years+'</span><span class="title">Years</span></div>';var counter_days='<div class="days"><span class="count">'+days+'</span><span class="title">Days</span></div>';var counter_hours='<div class="hours"><span class="count">'+hours+'</span><span class="title">Hours</span></div>';var counter_minutes='<div class="minutes"><span class="count">'+minutes+'</span><span class="title">Minutes</span></div>';var counter_seconds='<div class="seconds"><span class="count">'+seconds+'</span><span class="title">Seconds</span></div>';var includeYears=false,includeDays=false,includeHours=false,includeMinutes=false,includeSeconds=false;if(options.showYears){includeYears=true}if(options.showDays){includeDays=true}if(options.showHours){includeHours=true}if(options.showMinutes){includeMinutes=true}if(options.showSeconds){includeSeconds=true}if((!options.showOnZeroYears)&&(years=="00")){includeYears=false}if((!options.showOnZeroDays)&&(days=="00")){includeDays=false}if((!options.showOnZeroHours)&&(hours=="00")){includeHours=false}if((!options.showOnZeroMinutes)&&(minutes=="00")){includeMinutes=false}if((!options.showOnZeroSeconds)&&(seconds=="00")){includeSeconds=false}var counter_html="";if(includeYears){counter_html+=counter_years}if(includeDays){counter_html+=counter_days}if(includeHours){counter_html+=counter_hours}if(includeMinutes){counter_html+=counter_minutes}if(includeSeconds){counter_html+=counter_seconds}return counter_html}var nextDayByName=function(scheduledDay){var D=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],M=['January','February','March','April','May','June','July','August','September','October','November','December'];for(var prop in D){if(scheduledDay==D[prop]){var whichNext=prop}}var date=new Date();var dif=date.getDay()-whichNext;dif=dif>0?dif=7-dif:-dif;date.setDate(date.getDate()+dif);date.setHours(1);var dd=date.getDate();dd<0?dd='0'+dd:null;var yyyy=date.getFullYear();var mm=M[date.getMonth()];var nextDatebyDayofWeek=mm+' '+dd+', '+yyyy;return nextDatebyDayofWeek}}(jQuery));